<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>pylint.checkers.format.FormatChecker._check_keyword_parentheses</title>
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<!--    <link rel="icon" sizes="32x32" href="favicon_32.png">-->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&#128270;</text></svg>">
    <link rel="stylesheet" href="highlight.css" type="text/css">
</head>
<body class="pyfile">
<div id="source">
    <div class="highlight">
        <div id="header">
            <div class="content">
                <h1>Method: pylint.checkers.format.FormatChecker._check_keyword_parentheses</h1>
                <span>Calls: 11184, </span>
                <span>Exceptions: 8, </span>
                <span>Paths: 51</span>
                <br><a href="index.html">Back</a>
            </div>
        </div>
            <p><b>Path 1</b>: 10760 calls (0.96)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (10760) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 16 (110) 19 (79) 21 (70) 28 (51) 22 (49) 23 (47) 27 (47) 18 (47) 24 (46) 29 (45) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (10760) </p>
            <button class="run" title="lines run...">2 run</button>
            <button class="not_run" title="lines not run...">61 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full not_run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full not_run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full not_run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full not_run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full not_run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full not_run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full not_run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full not_run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 2</b>: 162 calls (0.01)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (162) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 110 (4) 39 (4) 23 (4) 47 (4) 488 (3) 31 (3) 5 (3) 297 (3) 28 (2) 86 (2) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (162) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 3</b>: 41 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (41) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 71 (2) 41 (1) 55 (1) 163 (1) 180 (1) 208 (1) 255 (1) 354 (1) 431 (1) 458 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (41) </p>
            <button class="run" title="lines run...">34 run</button>
            <button class="not_run" title="lines not run...">29 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 4</b>: 25 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (25) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 140 (1) 303 (1) 379 (1) 945 (1) 982 (1) 1025 (1) 1050 (1) 1083 (1) 21 (1) 734 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (25) </p>
            <button class="run" title="lines run...">22 run</button>
            <button class="not_run" title="lines not run...">41 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 5</b>: 17 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (17) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (3) 356 (2) 165 (1) 742 (1) 201 (1) 346 (1) 244 (1) 120 (1) 362 (1) 68 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (17) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 6</b>: 15 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (15) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (4) 292 (1) 16 (1) 56 (1) 78 (1) 268 (1) 643 (1) 653 (1) 663 (1) 14 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (15) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 7</b>: 15 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (15) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 14 (1) 4 (1) 28 (1) 315 (1) 36 (1) 23 (1) 56 (1) 113 (1) 144 (1) 237 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (15) </p>
            <button class="run" title="lines run...">33 run</button>
            <button class="not_run" title="lines not run...">30 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 8</b>: 13 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (13) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 91 (1) 654 (1) 41 (1) 59 (1) 99 (1) 118 (1) 160 (1) 227 (1) 112 (1) 220 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (13) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 9</b>: 12 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (12) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 77 (1) 923 (1) 943 (1) 1014 (1) 1037 (1) 38 (1) 281 (1) 116 (1) 83 (1) 58 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (12) </p>
            <button class="run" title="lines run...">29 run</button>
            <button class="not_run" title="lines not run...">34 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 10</b>: 11 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (11) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 67 (2) 831 (1) 1003 (1) 52 (1) 31 (1) 393 (1) 564 (1) 143 (1) 231 (1) 7 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (11) </p>
            <button class="run" title="lines run...">32 run</button>
            <button class="not_run" title="lines not run...">31 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 11</b>: 11 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (11) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 90 (1) 101 (1) 4 (1) 716 (1) 312 (1) 129 (1) 585 (1) 634 (1) 679 (1) 303 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (11) </p>
            <button class="run" title="lines run...">38 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 12</b>: 7 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (7) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 126 (2) 122 (1) 53 (1) 905 (1) 302 (1) 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (7) </p>
            <button class="run" title="lines run...">33 run</button>
            <button class="not_run" title="lines not run...">30 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 13</b>: 7 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (7) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 1423 (1) 243 (1) 23 (1) 346 (1) 212 (1) 274 (1) 1887 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (7) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 14</b>: 7 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (7) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 175 (2) 67 (1) 213 (1) 74 (1) 70 (1) 168 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (7) </p>
            <button class="run" title="lines run...">32 run</button>
            <button class="not_run" title="lines not run...">31 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 15</b>: 5 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (5) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 846 (1) 33 (1) 98 (1) 251 (1) 29 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (5) </p>
            <button class="run" title="lines run...">29 run</button>
            <button class="not_run" title="lines not run...">34 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 16</b>: 5 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (5) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 265 (1) 571 (1) 597 (1) 608 (1) 619 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (5) </p>
            <button class="run" title="lines run...">6 run</button>
            <button class="not_run" title="lines not run...">57 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full not_run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full not_run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full not_run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full not_run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full not_run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full not_run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 17</b>: 5 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (5) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (2) 455 (1) 498 (1) 541 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (5) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 18</b>: 5 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (5) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 336 (1) 379 (1) 411 (1) 429 (1) 439 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (5) </p>
            <button class="run" title="lines run...">38 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 19</b>: 4 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (4) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 63 (1) 96 (1) 113 (1) 1 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (4) </p>
            <button class="run" title="lines run...">39 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 20</b>: 4 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (4) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 333 (1) 86 (1) 38 (1) 175 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (4) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 21</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 32 (1) 287 (1) 78 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
            <button class="run" title="lines run...">27 run</button>
            <button class="not_run" title="lines not run...">36 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 22</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 30 (1) 1 (1) 2 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
            <button class="run" title="lines run...">38 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 23</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 167 (1) 194 (1) 223 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> GeneratorExit (3) </p>
            <button class="run" title="lines run...">35 run</button>
            <button class="not_run" title="lines not run...">28 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 24</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 419 (1) 0 (1) 2 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
            <button class="run" title="lines run...">34 run</button>
            <button class="not_run" title="lines not run...">29 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 25</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 12 (1) 29 (1) 355 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
            <button class="run" title="lines run...">35 run</button>
            <button class="not_run" title="lines not run...">28 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 26</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 135 (1) 408 (1) 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
            <button class="run" title="lines run...">38 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 27</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (3) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 97 (1) 115 (1) 133 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (3) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> GeneratorExit (3) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 28</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 99 (1) 237 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">37 run</button>
            <button class="not_run" title="lines not run...">26 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 29</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 44 (1) 216 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 30</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 151 (1) 367 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">33 run</button>
            <button class="not_run" title="lines not run...">30 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 31</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 79 (1) 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">37 run</button>
            <button class="not_run" title="lines not run...">26 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 32</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 167 (1) 185 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">31 run</button>
            <button class="not_run" title="lines not run...">32 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 33</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 203 (1) 220 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">40 run</button>
            <button class="not_run" title="lines not run...">23 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 34</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 255 (1) 399 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">35 run</button>
            <button class="not_run" title="lines not run...">28 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 35</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (2) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (2) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (2) </p>
            <button class="run" title="lines run...">39 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 36</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 294 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> GeneratorExit (1) </p>
            <button class="run" title="lines run...">34 run</button>
            <button class="not_run" title="lines not run...">29 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 37</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 374 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">32 run</button>
            <button class="not_run" title="lines not run...">31 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 38</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 54 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> GeneratorExit (1) </p>
            <button class="run" title="lines run...">29 run</button>
            <button class="not_run" title="lines not run...">34 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 39</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 472 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">39 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 40</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 524 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">24 run</button>
            <button class="not_run" title="lines not run...">39 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 41</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 118 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">29 run</button>
            <button class="not_run" title="lines not run...">34 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 42</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 334 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">34 run</button>
            <button class="not_run" title="lines not run...">29 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 43</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 387 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">32 run</button>
            <button class="not_run" title="lines not run...">31 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 44</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 669 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 45</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 376 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">38 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 46</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 448 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">29 run</button>
            <button class="not_run" title="lines not run...">34 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 47</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">37 run</button>
            <button class="not_run" title="lines not run...">26 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 48</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">34 run</button>
            <button class="not_run" title="lines not run...">29 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 49</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">35 run</button>
            <button class="not_run" title="lines not run...">28 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full not_run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full not_run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full not_run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 50</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">39 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full not_run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
            <p><b>Path 51</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> tokens</button> list (1) </p>
                <p><button class="input"><span>&#8594;</span> start</button> 0 (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> None (1) </p>
            <button class="run" title="lines run...">36 run</button>
            <button class="not_run" title="lines not run...">27 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">_check_keyword_parentheses</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span> <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TokenInfo</span><span class="p">],</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>
<span class="num"><a href="#3">3</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are not unnecessary parentheses after a keyword.</span></span>
<span class="num"><a href="#5">5</a></span><span></span>
<span class="num"><a href="#6">6</a></span><span><span class="sd">        Parens are unnecessary if there is exactly one balanced outer pair on a</span></span>
<span class="num"><a href="#7">7</a></span><span><span class="sd">        line and contains no commas (i.e. is not a tuple).</span></span>
<span class="num"><a href="#8">8</a></span><span></span>
<span class="num"><a href="#9">9</a></span><span><span class="sd">        Args:</span></span>
<span class="num"><a href="#10">10</a></span><span><span class="sd">        tokens: The entire list of Tokens.</span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        start: The position of the keyword in the token list.</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#13">13</a></span><span>        <span class="c1"># If the next token is not a paren, we&#39;re fine.</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#15">15</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#16">16</a></span><span class="full run">        <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#17">17</a></span><span class="full run">            <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="ow">and</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span></span>
<span class="num"><a href="#19">19</a></span><span class="full not_run">            <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;is&quot;</span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="p">):</span></span>
<span class="num"><a href="#21">21</a></span><span>            <span class="c1"># If this is part of an `is not` expression, we have a binary operator</span></span>
<span class="num"><a href="#22">22</a></span><span>            <span class="c1"># so the parentheses are not necessarily redundant.</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">        <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">        <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">False</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">        <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#27">27</a></span><span class="full run">        <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#28">28</a></span><span class="full run">        <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">keyword_token</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">string</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="n">line_num</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">start</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">            <span class="n">token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>            <span class="c1"># If we hit a newline, then assume any parens were for continuation.</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">NL</span><span class="p">:</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#37">37</a></span><span>            <span class="c1"># Since the walrus operator doesn&#39;t exist below python3.8, the tokenizer</span></span>
<span class="num"><a href="#38">38</a></span><span>            <span class="c1"># generates independent tokens</span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">            <span class="k">if</span> <span class="p">(</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">                <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span>  <span class="c1"># &lt;-- python3.8+ path</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                <span class="ow">or</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">+</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;:=&quot;</span></span>
<span class="num"><a href="#42">42</a></span><span>            <span class="p">):</span></span>
<span class="num"><a href="#43">43</a></span><span class="full run">                <span class="n">contains_walrus_operator</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">                <span class="n">walrus_operator_depth</span> <span class="o">=</span> <span class="n">depth</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">=</span> <span class="mi">1</span></span>
<span class="num"><a href="#49">49</a></span><span class="full run">            <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">                <span class="n">depth</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#51">51</a></span><span class="full run">                <span class="k">if</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#52">52</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">contains_double_parens</span> <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#53">53</a></span><span>                        <span class="c1"># For walrus operators in `if (not)` conditions and comprehensions</span></span>
<span class="num"><a href="#54">54</a></span><span class="full not_run">                        <span class="k">if</span> <span class="n">keyword_token</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#55">55</a></span><span class="full not_run">                            <span class="k">continue</span></span>
<span class="num"><a href="#56">56</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#57">57</a></span><span class="full not_run">                    <span class="n">contains_double_parens</span> <span class="o">-=</span> <span class="mi">1</span></span>
<span class="num"><a href="#58">58</a></span><span class="full not_run">                    <span class="k">continue</span></span>
<span class="num"><a href="#59">59</a></span><span>                <span class="c1"># &#39;)&#39; can&#39;t happen after if (foo), since it would be a syntax error.</span></span>
<span class="num"><a href="#60">60</a></span><span class="full run">                <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">string</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">}</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span></span>
<span class="num"><a href="#61">61</a></span><span class="full run">                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="num"><a href="#62">62</a></span><span class="full run">                <span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">tokenize</span><span class="o">.</span><span class="n">NEWLINE</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">ENDMARKER</span><span class="p">,</span> <span class="n">tokenize</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">}:</span></span>
<span class="num"><a href="#63">63</a></span><span class="full run">                    <span class="k">if</span> <span class="n">contains_walrus_operator</span> <span class="ow">and</span> <span class="n">walrus_operator_depth</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">depth</span><span class="p">:</span></span>
<span class="num"><a href="#64">64</a></span><span class="full run">                        <span class="k">return</span></span>
<span class="num"><a href="#65">65</a></span><span>                    <span class="c1"># The empty tuple () is always accepted.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">found_and_or</span><span class="p">:</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#70">70</a></span><span class="full not_run">                    <span class="k">if</span> <span class="n">keyword_token</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#71">71</a></span><span>                        <span class="c1"># This special case was added in https://github.com/PyCQA/pylint/pull/4948</span></span>
<span class="num"><a href="#72">72</a></span><span>                        <span class="c1"># but it could be removed in the future. Avoid churn for now.</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                        <span class="k">return</span></span>
<span class="num"><a href="#74">74</a></span><span class="full not_run">                    <span class="bp">self</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span></span>
<span class="num"><a href="#75">75</a></span><span class="full not_run">                        <span class="s2">&quot;superfluous-parens&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line_num</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">keyword_token</span></span>
<span class="num"><a href="#76">76</a></span><span>                    <span class="p">)</span></span>
<span class="num"><a href="#77">77</a></span><span class="full not_run">                <span class="k">return</span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">            <span class="k">elif</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></span>
<span class="num"><a href="#79">79</a></span><span>                <span class="c1"># This is a tuple, which is always acceptable.</span></span>
<span class="num"><a href="#80">80</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#81">81</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#82">82</a></span><span>                <span class="c1"># &#39;and&#39; and &#39;or&#39; are the only boolean operators with lower precedence</span></span>
<span class="num"><a href="#83">83</a></span><span>                <span class="c1"># than &#39;not&#39;, so parens are only required when they are found.</span></span>
<span class="num"><a href="#84">84</a></span><span class="full run">                <span class="k">if</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">}:</span></span>
<span class="num"><a href="#85">85</a></span><span class="full not_run">                    <span class="n">found_and_or</span> <span class="o">=</span> <span class="kc">True</span></span>
<span class="num"><a href="#86">86</a></span><span>                <span class="c1"># A yield inside an expression must always be in parentheses,</span></span>
<span class="num"><a href="#87">87</a></span><span>                <span class="c1"># quit early without error.</span></span>
<span class="num"><a href="#88">88</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;yield&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#89">89</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#90">90</a></span><span>                <span class="c1"># A generator expression always has a &#39;for&#39; token in it, and</span></span>
<span class="num"><a href="#91">91</a></span><span>                <span class="c1"># the &#39;for&#39; token is only legal inside parens when it is in a</span></span>
<span class="num"><a href="#92">92</a></span><span>                <span class="c1"># generator expression.  The parens are necessary here, so bail</span></span>
<span class="num"><a href="#93">93</a></span><span>                <span class="c1"># without an error.</span></span>
<span class="num"><a href="#94">94</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#95">95</a></span><span class="full not_run">                    <span class="k">return</span></span>
<span class="num"><a href="#96">96</a></span><span>                <span class="c1"># A generator expression can have an &#39;else&#39; token in it.</span></span>
<span class="num"><a href="#97">97</a></span><span>                <span class="c1"># We check the rest of the tokens to see if any problems occur after</span></span>
<span class="num"><a href="#98">98</a></span><span>                <span class="c1"># the &#39;else&#39;.</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="k">elif</span> <span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#100">100</a></span><span class="full not_run">                    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">string</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span></span>
<span class="num"><a href="#101">101</a></span><span class="full not_run">                        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keyword_parentheses</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">:],</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">                    <span class="k">return</span></span>
            </pre>
    </div>
</div>
<i class="bi bi-arrow-down"></i>
</body>
</html>
