<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>argparse._ActionsContainer.add_argument</title>
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<!--    <link rel="icon" sizes="32x32" href="favicon_32.png">-->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&#128270;</text></svg>">
    <link rel="stylesheet" href="highlight.css" type="text/css">
</head>
<body class="pyfile">
<div id="source">
    <div class="highlight">
        <div id="header">
            <div class="content">
                <h1>Method: argparse._ActionsContainer.add_argument</h1>
                <span>Calls: 6111, </span>
                <span>Exceptions: 101, </span>
                <span>Paths: 29</span>
                <br><a href="index.html">Back</a>
            </div>
        </div>
            <p><b>Path 1</b>: 1994 calls (0.33)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-h', '--help') (1867) ('+h', '++help') (37) ('-y',) (22) ('--bar',) (13) ('--baz',) (8) ('--taz',) (6) ('--quux',) (6) ('--bazz',) (6) ('-s',) (4) (...</p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'action': 'help', 'default': '==SUPPRESS==', 'help': 'show this help message and exit'} (1904) dict (56) {'help': 'Set the quux', 'default': 42} (6) ...</p>
                <p><button class="output"><span>&#8617; return</span></button> _HelpAction (1904) _StoreAction (49) BooleanOptionalAction (18) _StoreConstAction (6) _AppendAction (5) TestActionUserDefined.OptionalAction (4) _Stor...</p>
            <button class="run" title="lines run...">14 run</button>
            <button class="not_run" title="lines not run...">14 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 2</b>: 1122 calls (0.18)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-x',) (207) ('--foo',) (70) ('-a',) (64) ('-c',) (60) ('-b',) (56) ('--bar',) (52) ('-y',) (49) ('--baz',) (40) ('-z',) (37) ('--spam',) (34) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (268) dict (144) {'action': 'store_true'} (140) {'help': '==SUPPRESS=='} (38) {'help': 'bar help'} (36) {'action': 'store_true', 'help': 'b help'} ...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (666) _StoreTrueAction (290) _StoreFalseAction (44) _StoreConstAction (40) _CountAction (24) _AppendAction (24) BooleanOptionalAction (16...</p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (2) </p>
            <button class="run" title="lines run...">15 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 3</b>: 1059 calls (0.17)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-x',) (211) ('--foo',) (177) ('-y',) (122) ('-w',) (83) ('-z',) (49) ('-v', '--version') (45) ('--y',) (24) ('--w',) (24) ('-b',) (22) ('-c',) (18) ...</p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (195) {} (178) {'action': 'store_true'} (58) {'action': 'store_true', 'help': 'foo help'} (56) {'choices': '123', 'help': 'y help'} (49) {'action...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (713) _StoreTrueAction (208) _VersionAction (54) _StoreConstAction (22) BooleanOptionalAction (20) _AppendAction (13) _CountAction (12) _...</p>
                <p><button class="warning"><span>&#9888; exception</span></button> ArgumentError (2) </p>
            <button class="run" title="lines run...">17 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 4</b>: 881 calls (0.14)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('bar',) (151) ('foo',) (126) ('spam',) (118) ('x',) (89) ('z',) (77) ('t',) (49) ('u',) (49) ('a',) (42) ('y',) (37) ('b',) (24) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (236) dict (204) {'choices': 'abc', 'help': 'x help'} (49) {'nargs': '...', 'help': 'u help'} (49) {'help': 'spam help'} (48) {'nargs': '?'} (40) {...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (872) _AppendAction (8) TestActionRegistration.MyAction (1) </p>
            <button class="run" title="lines run...">18 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 5</b>: 633 calls (0.1)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (209) ('bar',) (162) ('spam',) (104) ('x',) (40) ('y',) (32) ('baz',) (30) ('a',) (22) ('z',) (14) ('b',) (6) ('d',) (6) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (135) dict (88) {'nargs': '?'} (80) {'nargs': '+'} (74) {'nargs': '*'} (72) {'nargs': 1} (66) {'nargs': 2} (40) {'nargs': '?', 'help': 'a help'} (1...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (609) _AppendAction (16) None (8) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (8) </p>
            <button class="run" title="lines run...">16 run</button>
            <button class="not_run" title="lines not run...">12 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 6</b>: 101 calls (0.02)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-y',) (32) ('--baz',) (22) ('-b',) (14) ('-s',) (8) ('-c',) (8) ('-z',) (8) ('+',) (8) ('-x',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (54) {'action': 'store_true', 'default': '==SUPPRESS=='} (8) {'default': 42} (8) {'nargs': '+', 'default': 'spam'} (8) {'nargs': '?', 'default': ...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (69) TestActionUserDefined.OptionalAction (8) _StoreTrueAction (8) _AppendConstAction (8) _AppendAction (8) </p>
            <button class="run" title="lines run...">12 run</button>
            <button class="not_run" title="lines not run...">16 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 7</b>: 90 calls (0.01)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (40) ('badger',) (25) ('bar',) (24) ('z',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?', 'default': 42} (24) {'nargs': '*', 'default': 'X', 'help': 'BADGER'} (17) dict (16) {'nargs': '?', 'default': '==SUPPRESS=='} (8) {'nar...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (82) TestActionUserDefined.PositionalAction (8) </p>
            <button class="run" title="lines run...">13 run</button>
            <button class="not_run" title="lines not run...">15 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 8</b>: 54 calls (0.01)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (20) ('badger',) (17) ('bar',) (12) ('start',) (1) ('pattern',) (1) ('top',) (1) ('optional_positional',) (1) ('z',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?', 'default': 42} (12) dict (8) {'nargs': '?', 'default': 'wooden', 'help': 'badger help'} (6) {'default': 0.5, 'help': 'badger %(prog)s %...</p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (50) TestActionUserDefined.PositionalAction (4) </p>
            <button class="run" title="lines run...">15 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 9</b>: 37 calls (0.01)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-x',) (32) ('-y',) (3) ('--foo',) (2) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (8) {'bar': None} (1) {'callback': 'foo'} (1) {'nargs': 0, 'action': 'store'} (1) {'const': 'foo', 'nargs': 1, 'action': 'store'} (1) {'const': '...</p>
                <p><button class="warning"><span>&#9888; exception</span></button> TypeError (28) ValueError (9) </p>
            <button class="run" title="lines run...">10 run</button>
            <button class="not_run" title="lines not run...">18 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 10</b>: 32 calls (0.01)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (16) ('bar',) (16) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?'} (16) {'nargs': '*'} (16) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (32) </p>
            <button class="run" title="lines run...">17 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 11</b>: 24 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--baz',) (16) ('--version',) (8) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'action': 'store_true'} (16) {'action': 'version', 'version': '1.0'} (8) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreTrueAction (16) _VersionAction (8) </p>
            <button class="run" title="lines run...">16 run</button>
            <button class="not_run" title="lines not run...">12 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 12</b>: 23 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--foo',) (23) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (23) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (23) </p>
            <button class="run" title="lines run...">18 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 13</b>: 16 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (8) ('bar',) (8) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?'} (8) {'nargs': '*'} (8) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (16) </p>
            <button class="run" title="lines run...">19 run</button>
            <button class="not_run" title="lines not run...">9 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 14</b>: 12 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--baz',) (8) ('--version',) (4) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'action': 'store_true'} (8) {'action': 'version', 'version': '1.0'} (4) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreTrueAction (8) _VersionAction (4) </p>
            <button class="run" title="lines run...">18 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 15</b>: 11 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('spam',) (8) ('command',) (3) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': 0, 'action': 'store'} (1) {'const': 'foo', 'nargs': 1, 'action': 'store'} (1) {'const': 'foo', 'nargs': '*', 'action': 'store'} (1) {'const'...</p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (8) TypeError (3) </p>
            <button class="run" title="lines run...">11 run</button>
            <button class="not_run" title="lines not run...">17 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 16</b>: 4 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> () (3) ('foo',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (1) {'action': 'append'} (1) {'action': 'store'} (1) {'required': True} (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> TypeError (4) </p>
            <button class="run" title="lines run...">4 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full not_run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full not_run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 17</b>: 3 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--foo',) (2) ('-x',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'action': 'foo'} (1) dict (1) {'action': 'store-true'} (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (3) </p>
            <button class="run" title="lines run...">10 run</button>
            <button class="not_run" title="lines not run...">18 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 18</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--',) (1) ('---',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (2) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (2) </p>
            <button class="run" title="lines run...">3 run</button>
            <button class="not_run" title="lines not run...">25 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full not_run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full not_run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 19</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--foo',) (2) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'type': 'int'} (1) dict (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (2) </p>
            <button class="run" title="lines run...">13 run</button>
            <button class="not_run" title="lines not run...">15 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 20</b>: 2 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--foo',) (2) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': 'a'} (1) {'nargs': 'abcd'} (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (2) </p>
            <button class="run" title="lines run...">17 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 21</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-x',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (1) </p>
            <button class="run" title="lines run...">15 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 22</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('foo',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'action': 'baz'} (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (1) </p>
            <button class="run" title="lines run...">11 run</button>
            <button class="not_run" title="lines not run...">17 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 23</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('bar',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'dest': 'baz'} (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> ValueError (1) </p>
            <button class="run" title="lines run...">4 run</button>
            <button class="not_run" title="lines not run...">24 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full not_run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full not_run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full not_run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 24</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('--spam',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> Success (1) </p>
            <button class="run" title="lines run...">7 run</button>
            <button class="not_run" title="lines not run...">21 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 25</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('spam',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> dict (1) </p>
                <p><button class="warning"><span>&#9888; exception</span></button> Success (1) </p>
            <button class="run" title="lines run...">8 run</button>
            <button class="not_run" title="lines not run...">20 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full not_run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full not_run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full not_run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full not_run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full not_run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full not_run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 26</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-w',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (1) </p>
            <button class="run" title="lines run...">17 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 27</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('y',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?'} (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (1) </p>
            <button class="run" title="lines run...">18 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 28</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('-w',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {} (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (1) </p>
            <button class="run" title="lines run...">15 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
            <p><b>Path 29</b>: 1 calls (0.0)</p>
                <p><button class="input"><span>&#8594;</span> args</button> ('y',) (1) </p>
                <p><button class="input"><span>&#8594;</span> kwargs</button> {'nargs': '?'} (1) </p>
                <p><button class="output"><span>&#8617; return</span></button> _StoreAction (1) </p>
            <button class="run" title="lines run...">16 run</button>
            <button class="not_run" title="lines not run...">12 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">add_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span></span>
<span class="num"><a href="#2">2</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></span>
<span class="num"><a href="#3">3</a></span><span><span class="sd">        add_argument(dest, ..., name=value, ...)</span></span>
<span class="num"><a href="#4">4</a></span><span><span class="sd">        add_argument(option_string, option_string, ..., name=value, ...)</span></span>
<span class="num"><a href="#5">5</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#6">6</a></span><span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="c1"># if no positional args are supplied or only one is supplied and</span></span>
<span class="num"><a href="#8">8</a></span><span>        <span class="c1"># it doesn&#39;t look like an option string, parse a positional</span></span>
<span class="num"><a href="#9">9</a></span><span>        <span class="c1"># argument</span></span>
<span class="num"><a href="#10">10</a></span><span class="full run">        <span class="n">chars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_chars</span></span>
<span class="num"><a href="#11">11</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span></span>
<span class="num"><a href="#12">12</a></span><span class="full run">            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="s1">&#39;dest&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#13">13</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;dest supplied twice for positional argument&#39;</span><span class="p">)</span></span>
<span class="num"><a href="#14">14</a></span><span class="full run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_positional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#15">15</a></span><span></span>
<span class="num"><a href="#16">16</a></span><span>        <span class="c1"># otherwise, we&#39;re adding an optional argument</span></span>
<span class="num"><a href="#17">17</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#18">18</a></span><span class="full not_run">            <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_optional_kwargs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#19">19</a></span><span></span>
<span class="num"><a href="#20">20</a></span><span>        <span class="c1"># if no default was supplied, use the parser-level default</span></span>
<span class="num"><a href="#21">21</a></span><span class="full run">        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span></span>
<span class="num"><a href="#22">22</a></span><span class="full run">            <span class="n">dest</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dest&#39;</span><span class="p">]</span></span>
<span class="num"><a href="#23">23</a></span><span class="full run">            <span class="k">if</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span></span>
<span class="num"><a href="#24">24</a></span><span class="full run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span></span>
<span class="num"><a href="#25">25</a></span><span class="full not_run">            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#26">26</a></span><span class="full not_run">                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_default</span></span>
<span class="num"><a href="#27">27</a></span><span></span>
<span class="num"><a href="#28">28</a></span><span>        <span class="c1"># create the action object, and add it to the parser</span></span>
<span class="num"><a href="#29">29</a></span><span class="full run">        <span class="n">action_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pop_action_class</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#30">30</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">action_class</span><span class="p">):</span></span>
<span class="num"><a href="#31">31</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown action &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action_class</span><span class="p">,))</span></span>
<span class="num"><a href="#32">32</a></span><span class="full run">        <span class="n">action</span> <span class="o">=</span> <span class="n">action_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></span>
<span class="num"><a href="#33">33</a></span><span></span>
<span class="num"><a href="#34">34</a></span><span>        <span class="c1"># raise an error if the action type is not callable</span></span>
<span class="num"><a href="#35">35</a></span><span class="full run">        <span class="n">type_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></span>
<span class="num"><a href="#36">36</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">type_func</span><span class="p">):</span></span>
<span class="num"><a href="#37">37</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not callable&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#38">38</a></span><span></span>
<span class="num"><a href="#39">39</a></span><span class="full run">        <span class="k">if</span> <span class="n">type_func</span> <span class="ow">is</span> <span class="n">FileType</span><span class="p">:</span></span>
<span class="num"><a href="#40">40</a></span><span class="full not_run">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a FileType class object, instance of it&#39;</span></span>
<span class="num"><a href="#41">41</a></span><span class="full not_run">                             <span class="s1">&#39; must be passed&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">type_func</span><span class="p">,))</span></span>
<span class="num"><a href="#42">42</a></span><span></span>
<span class="num"><a href="#43">43</a></span><span>        <span class="c1"># raise an error if the metavar does not match the type</span></span>
<span class="num"><a href="#44">44</a></span><span class="full run">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_get_formatter&quot;</span><span class="p">):</span></span>
<span class="num"><a href="#45">45</a></span><span class="full not_run">            <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#46">46</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">_get_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">_format_args</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></span>
<span class="num"><a href="#47">47</a></span><span class="full not_run">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span></span>
<span class="num"><a href="#48">48</a></span><span class="full not_run">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;length of metavar tuple does not match nargs&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#49">49</a></span><span></span>
<span class="num"><a href="#50">50</a></span><span class="full run">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></span>
            </pre>
    </div>
</div>
<i class="bi bi-arrow-down"></i>
</body>
</html>
