<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>flask.app.Flask.run</title>
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
<!--    <link rel="icon" sizes="32x32" href="favicon_32.png">-->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&#128270;</text></svg>">
    <link rel="stylesheet" href="highlight.css" type="text/css">
</head>
<body class="pyfile">
<div id="source">
    <div class="highlight">
        <div id="header">
            <div class="content">
                <h1>Method: flask.app.Flask.run</h1>
                <span>Calls: 35, </span>
                <span>Exceptions: 0, </span>
                <span>Paths: 7</span>
                <br><a href="index.html">Back</a>
            </div>
        </div>
            <p><b>Path 1</b>: 25 calls (0.71)</p>
                <p><button class="input"><span>&#8594;</span> host</button> None (25) </p>
                <p><button class="input"><span>&#8594;</span> port</button> None (25) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> True (13) False (12) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (25) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {'use_debugger': True, 'use_reloader': True} (6) {'use_debugger': False, 'use_reloader': True} (6) {'use_debugger': True, 'use_reloader': False} (6) {...</p>
            <button class="run" title="lines run...">23 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full not_run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 2</b>: 3 calls (0.09)</p>
                <p><button class="input"><span>&#8594;</span> host</button> None (3) </p>
                <p><button class="input"><span>&#8594;</span> port</button> None (3) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> None (3) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (3) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (3) </p>
            <button class="run" title="lines run...">23 run</button>
            <button class="not_run" title="lines not run...">10 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full not_run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 3</b>: 2 calls (0.06)</p>
                <p><button class="input"><span>&#8594;</span> host</button> None (2) </p>
                <p><button class="input"><span>&#8594;</span> port</button> None (2) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> None (2) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (2) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (2) </p>
            <button class="run" title="lines run...">22 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full not_run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full not_run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 4</b>: 2 calls (0.06)</p>
                <p><button class="input"><span>&#8594;</span> host</button> 'localhost' (2) </p>
                <p><button class="input"><span>&#8594;</span> port</button> 80 (1) 0 (1) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> None (2) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (2) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (2) </p>
            <button class="run" title="lines run...">20 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full not_run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full not_run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 5</b>: 1 calls (0.03)</p>
                <p><button class="input"><span>&#8594;</span> host</button> 'localhost' (1) </p>
                <p><button class="input"><span>&#8594;</span> port</button> 8000 (1) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> True (1) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (1) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (1) </p>
            <button class="run" title="lines run...">20 run</button>
            <button class="not_run" title="lines not run...">13 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full not_run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full not_run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 6</b>: 1 calls (0.03)</p>
                <p><button class="input"><span>&#8594;</span> host</button> 'localhost' (1) </p>
                <p><button class="input"><span>&#8594;</span> port</button> None (1) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> None (1) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (1) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (1) </p>
            <button class="run" title="lines run...">21 run</button>
            <button class="not_run" title="lines not run...">12 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full not_run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full not_run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
            <p><b>Path 7</b>: 1 calls (0.03)</p>
                <p><button class="input"><span>&#8594;</span> host</button> None (1) </p>
                <p><button class="input"><span>&#8594;</span> port</button> 80 (1) </p>
                <p><button class="input"><span>&#8594;</span> debug</button> None (1) </p>
                <p><button class="input"><span>&#8594;</span> load_dotenv</button> True (1) </p>
                <p><button class="input"><span>&#8594;</span> options</button> {} (1) </p>
            <button class="run" title="lines run...">22 run</button>
            <button class="not_run" title="lines not run...">11 not run</button>
            <pre>
<span class="num"><a href="#1">1</a></span><span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span></span>
<span class="num"><a href="#2">2</a></span><span>        <span class="bp">self</span><span class="p">,</span></span>
<span class="num"><a href="#3">3</a></span><span>        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#4">4</a></span><span>        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#5">5</a></span><span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></span>
<span class="num"><a href="#6">6</a></span><span>        <span class="n">load_dotenv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></span>
<span class="num"><a href="#7">7</a></span><span>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span></span>
<span class="num"><a href="#8">8</a></span><span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#9">9</a></span><span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs the application on a local development server.</span></span>
<span class="num"><a href="#10">10</a></span><span></span>
<span class="num"><a href="#11">11</a></span><span><span class="sd">        Do not use ``run()`` in a production setting. It is not intended to</span></span>
<span class="num"><a href="#12">12</a></span><span><span class="sd">        meet security and performance requirements for a production server.</span></span>
<span class="num"><a href="#13">13</a></span><span><span class="sd">        Instead, see :doc:`/deploying/index` for WSGI server recommendations.</span></span>
<span class="num"><a href="#14">14</a></span><span></span>
<span class="num"><a href="#15">15</a></span><span><span class="sd">        If the :attr:`debug` flag is set the server will automatically reload</span></span>
<span class="num"><a href="#16">16</a></span><span><span class="sd">        for code changes and show a debugger in case an exception happened.</span></span>
<span class="num"><a href="#17">17</a></span><span></span>
<span class="num"><a href="#18">18</a></span><span><span class="sd">        If you want to run the application in debug mode, but disable the</span></span>
<span class="num"><a href="#19">19</a></span><span><span class="sd">        code execution on the interactive debugger, you can pass</span></span>
<span class="num"><a href="#20">20</a></span><span><span class="sd">        ``use_evalex=False`` as parameter.  This will keep the debugger&#39;s</span></span>
<span class="num"><a href="#21">21</a></span><span><span class="sd">        traceback screen active, but disable code execution.</span></span>
<span class="num"><a href="#22">22</a></span><span></span>
<span class="num"><a href="#23">23</a></span><span><span class="sd">        It is not recommended to use this function for development with</span></span>
<span class="num"><a href="#24">24</a></span><span><span class="sd">        automatic reloading as this is badly supported.  Instead you should</span></span>
<span class="num"><a href="#25">25</a></span><span><span class="sd">        be using the :command:`flask` command line script&#39;s ``run`` support.</span></span>
<span class="num"><a href="#26">26</a></span><span></span>
<span class="num"><a href="#27">27</a></span><span><span class="sd">        .. admonition:: Keep in Mind</span></span>
<span class="num"><a href="#28">28</a></span><span></span>
<span class="num"><a href="#29">29</a></span><span><span class="sd">           Flask will suppress any server error with a generic error page</span></span>
<span class="num"><a href="#30">30</a></span><span><span class="sd">           unless it is in debug mode.  As such to enable just the</span></span>
<span class="num"><a href="#31">31</a></span><span><span class="sd">           interactive debugger without the code reloading, you have to</span></span>
<span class="num"><a href="#32">32</a></span><span><span class="sd">           invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.</span></span>
<span class="num"><a href="#33">33</a></span><span><span class="sd">           Setting ``use_debugger`` to ``True`` without being in debug mode</span></span>
<span class="num"><a href="#34">34</a></span><span><span class="sd">           won&#39;t catch any exceptions because there won&#39;t be any to</span></span>
<span class="num"><a href="#35">35</a></span><span><span class="sd">           catch.</span></span>
<span class="num"><a href="#36">36</a></span><span></span>
<span class="num"><a href="#37">37</a></span><span><span class="sd">        :param host: the hostname to listen on. Set this to ``&#39;0.0.0.0&#39;`` to</span></span>
<span class="num"><a href="#38">38</a></span><span><span class="sd">            have the server available externally as well. Defaults to</span></span>
<span class="num"><a href="#39">39</a></span><span><span class="sd">            ``&#39;127.0.0.1&#39;`` or the host in the ``SERVER_NAME`` config variable</span></span>
<span class="num"><a href="#40">40</a></span><span><span class="sd">            if present.</span></span>
<span class="num"><a href="#41">41</a></span><span><span class="sd">        :param port: the port of the webserver. Defaults to ``5000`` or the</span></span>
<span class="num"><a href="#42">42</a></span><span><span class="sd">            port defined in the ``SERVER_NAME`` config variable if present.</span></span>
<span class="num"><a href="#43">43</a></span><span><span class="sd">        :param debug: if given, enable or disable debug mode. See</span></span>
<span class="num"><a href="#44">44</a></span><span><span class="sd">            :attr:`debug`.</span></span>
<span class="num"><a href="#45">45</a></span><span><span class="sd">        :param load_dotenv: Load the nearest :file:`.env` and :file:`.flaskenv`</span></span>
<span class="num"><a href="#46">46</a></span><span><span class="sd">            files to set environment variables. Will also change the working</span></span>
<span class="num"><a href="#47">47</a></span><span><span class="sd">            directory to the directory containing the first file found.</span></span>
<span class="num"><a href="#48">48</a></span><span><span class="sd">        :param options: the options to be forwarded to the underlying Werkzeug</span></span>
<span class="num"><a href="#49">49</a></span><span><span class="sd">            server. See :func:`werkzeug.serving.run_simple` for more</span></span>
<span class="num"><a href="#50">50</a></span><span><span class="sd">            information.</span></span>
<span class="num"><a href="#51">51</a></span><span></span>
<span class="num"><a href="#52">52</a></span><span><span class="sd">        .. versionchanged:: 1.0</span></span>
<span class="num"><a href="#53">53</a></span><span><span class="sd">            If installed, python-dotenv will be used to load environment</span></span>
<span class="num"><a href="#54">54</a></span><span><span class="sd">            variables from :file:`.env` and :file:`.flaskenv` files.</span></span>
<span class="num"><a href="#55">55</a></span><span></span>
<span class="num"><a href="#56">56</a></span><span><span class="sd">            The :envvar:`FLASK_DEBUG` environment variable will override :attr:`debug`.</span></span>
<span class="num"><a href="#57">57</a></span><span></span>
<span class="num"><a href="#58">58</a></span><span><span class="sd">            Threaded mode is enabled by default.</span></span>
<span class="num"><a href="#59">59</a></span><span></span>
<span class="num"><a href="#60">60</a></span><span><span class="sd">        .. versionchanged:: 0.10</span></span>
<span class="num"><a href="#61">61</a></span><span><span class="sd">            The default port is now picked from the ``SERVER_NAME``</span></span>
<span class="num"><a href="#62">62</a></span><span><span class="sd">            variable.</span></span>
<span class="num"><a href="#63">63</a></span><span><span class="sd">        &quot;&quot;&quot;</span></span>
<span class="num"><a href="#64">64</a></span><span>        <span class="c1"># Ignore this call so that it doesn&#39;t start another server if</span></span>
<span class="num"><a href="#65">65</a></span><span>        <span class="c1"># the &#39;flask run&#39; command is used.</span></span>
<span class="num"><a href="#66">66</a></span><span class="full run">        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;FLASK_RUN_FROM_CLI&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span></span>
<span class="num"><a href="#67">67</a></span><span class="full not_run">            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_running_from_reloader</span><span class="p">():</span></span>
<span class="num"><a href="#68">68</a></span><span class="full not_run">                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span></span>
<span class="num"><a href="#69">69</a></span><span class="full not_run">                    <span class="s2">&quot; * Ignoring a call to &#39;app.run()&#39; that would block&quot;</span></span>
<span class="num"><a href="#70">70</a></span><span>                    <span class="s2">&quot; the current &#39;flask&#39; CLI command.</span><span class="se">\n</span><span class="s2">&quot;</span></span>
<span class="num"><a href="#71">71</a></span><span>                    <span class="s2">&quot;   Only call &#39;app.run()&#39; in an &#39;if __name__ ==&quot;</span></span>
<span class="num"><a href="#72">72</a></span><span>                    <span class="s1">&#39; &quot;__main__&quot;</span><span class="se">\&#39;</span><span class="s1"> guard.&#39;</span><span class="p">,</span></span>
<span class="num"><a href="#73">73</a></span><span class="full not_run">                    <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span></span>
<span class="num"><a href="#74">74</a></span><span>                <span class="p">)</span></span>
<span class="num"><a href="#75">75</a></span><span></span>
<span class="num"><a href="#76">76</a></span><span class="full not_run">            <span class="k">return</span></span>
<span class="num"><a href="#77">77</a></span><span></span>
<span class="num"><a href="#78">78</a></span><span class="full run">        <span class="k">if</span> <span class="n">get_load_dotenv</span><span class="p">(</span><span class="n">load_dotenv</span><span class="p">):</span></span>
<span class="num"><a href="#79">79</a></span><span class="full run">            <span class="n">cli</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">()</span></span>
<span class="num"><a href="#80">80</a></span><span></span>
<span class="num"><a href="#81">81</a></span><span>            <span class="c1"># if set, env var overrides existing value</span></span>
<span class="num"><a href="#82">82</a></span><span class="full run">            <span class="k">if</span> <span class="s2">&quot;FLASK_DEBUG&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span></span>
<span class="num"><a href="#83">83</a></span><span class="full not_run">                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">get_debug_flag</span><span class="p">()</span></span>
<span class="num"><a href="#84">84</a></span><span></span>
<span class="num"><a href="#85">85</a></span><span>        <span class="c1"># debug passed to method overrides all other sources</span></span>
<span class="num"><a href="#86">86</a></span><span class="full run">        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></span>
<span class="num"><a href="#87">87</a></span><span class="full not_run">            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#88">88</a></span><span></span>
<span class="num"><a href="#89">89</a></span><span class="full run">        <span class="n">server_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SERVER_NAME&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#90">90</a></span><span class="full run">        <span class="n">sn_host</span> <span class="o">=</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="kc">None</span></span>
<span class="num"><a href="#91">91</a></span><span></span>
<span class="num"><a href="#92">92</a></span><span class="full run">        <span class="k">if</span> <span class="n">server_name</span><span class="p">:</span></span>
<span class="num"><a href="#93">93</a></span><span class="full run">            <span class="n">sn_host</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">sn_port</span> <span class="o">=</span> <span class="n">server_name</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span></span>
<span class="num"><a href="#94">94</a></span><span></span>
<span class="num"><a href="#95">95</a></span><span class="full run">        <span class="k">if</span> <span class="ow">not</span> <span class="n">host</span><span class="p">:</span></span>
<span class="num"><a href="#96">96</a></span><span class="full run">            <span class="k">if</span> <span class="n">sn_host</span><span class="p">:</span></span>
<span class="num"><a href="#97">97</a></span><span class="full run">                <span class="n">host</span> <span class="o">=</span> <span class="n">sn_host</span></span>
<span class="num"><a href="#98">98</a></span><span>            <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#99">99</a></span><span class="full not_run">                <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span></span>
<span class="num"><a href="#100">100</a></span><span></span>
<span class="num"><a href="#101">101</a></span><span class="full run">        <span class="k">if</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="num"><a href="#102">102</a></span><span class="full run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span></span>
<span class="num"><a href="#103">103</a></span><span class="full not_run">        <span class="k">elif</span> <span class="n">sn_port</span><span class="p">:</span></span>
<span class="num"><a href="#104">104</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sn_port</span><span class="p">)</span></span>
<span class="num"><a href="#105">105</a></span><span>        <span class="k">else</span><span class="p">:</span></span>
<span class="num"><a href="#106">106</a></span><span class="full not_run">            <span class="n">port</span> <span class="o">=</span> <span class="mi">5000</span></span>
<span class="num"><a href="#107">107</a></span><span></span>
<span class="num"><a href="#108">108</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_reloader&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#109">109</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;use_debugger&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span></span>
<span class="num"><a href="#110">110</a></span><span class="full run">        <span class="n">options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;threaded&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></span>
<span class="num"><a href="#111">111</a></span><span></span>
<span class="num"><a href="#112">112</a></span><span class="full run">        <span class="n">cli</span><span class="o">.</span><span class="n">show_server_banner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></span>
<span class="num"><a href="#113">113</a></span><span></span>
<span class="num"><a href="#114">114</a></span><span class="full run">        <span class="kn">from</span> <span class="nn">werkzeug.serving</span> <span class="kn">import</span> <span class="n">run_simple</span></span>
<span class="num"><a href="#115">115</a></span><span></span>
<span class="num"><a href="#116">116</a></span><span class="full run">        <span class="k">try</span><span class="p">:</span></span>
<span class="num"><a href="#117">117</a></span><span class="full run">            <span class="n">run_simple</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">host</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></span>
<span class="num"><a href="#118">118</a></span><span>        <span class="k">finally</span><span class="p">:</span></span>
<span class="num"><a href="#119">119</a></span><span>            <span class="c1"># reset the first request information if the development server</span></span>
<span class="num"><a href="#120">120</a></span><span>            <span class="c1"># reset normally.  This makes it possible to restart the server</span></span>
<span class="num"><a href="#121">121</a></span><span>            <span class="c1"># without reloader and that stuff from an interactive shell.</span></span>
<span class="num"><a href="#122">122</a></span><span class="full run">            <span class="bp">self</span><span class="o">.</span><span class="n">_got_first_request</span> <span class="o">=</span> <span class="kc">False</span></span>
            </pre>
    </div>
</div>
<i class="bi bi-arrow-down"></i>
</body>
</html>
